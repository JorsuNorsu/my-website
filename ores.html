<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ores</title>

<style>
:root { --filter-height: 72px; }

body {
  margin: 0;
  font-family: Inter, system-ui, Arial, sans-serif;
  background: #f4f6f8;
}

nav {
  background: #1f2937;
  padding: 15px;
  text-align: center;
}

nav a {
  color: white;
  text-decoration: none;
  margin: 0 15px;
  font-weight: bold;
}

.container {
  max-width: 1200px;
  margin: 50px auto;
  background: white;
  border-radius: 14px;
  box-shadow: 0 10px 25px rgba(0,0,0,.1);
}

h1 {
  text-align: center;
  padding: 20px 0 10px;
}

/* FILTER BAR */
.filter-bar {
  position: sticky;
  top: 0;
  z-index: 10;
  display: flex;
  gap: 16px;
  align-items: flex-end;
  padding: 14px 20px;
  background: #111827;
  color: white;
}

.filter-group {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.filter-group label {
  font-size: 12px;
  opacity: .85;
  text-transform: uppercase;
}

.filter-group select,
.filter-group input {
  padding: 8px 10px;
  border-radius: 6px;
  border: none;
  font-size: 14px;
  min-width: 200px;
}

.filter-spacer { flex: 1; }

.reset-btn {
  padding: 8px 14px;
  font-size: 14px;
  border-radius: 6px;
  border: 1px solid #9ca3af;
  background: transparent;
  color: white;
  cursor: pointer;
}

.reset-btn:hover {
  background: rgba(255,255,255,.1);
}

#resultCount {
  font-size: 14px;
  opacity: .85;
}

/* TABLE */
table {
  width: 100%;
  border-collapse: collapse;
}

thead th {
  position: sticky;
  top: var(--filter-height);
  z-index: 5;
  background: #1f2937;
  color: white;
  font-size: 13px;
  text-transform: uppercase;
  padding: 10px;
  cursor: pointer;
  border-bottom: 2px solid #000;
}

thead th[data-sort]::after {
  content: " â‡…";
  font-size: 11px;
  opacity: .4;
}

thead th.sorted-asc::after { content: " â–²"; opacity: 1; }
thead th.sorted-desc::after { content: " â–¼"; opacity: 1; }

tbody tr {
  border-bottom: 2px solid #000;
}

tbody tr:hover {
  background: rgba(0,0,0,.04);
}

td {
  padding: 10px;
  text-align: center;
}

td:first-child {
  font-weight: 700;
}

.rarity-bg {
  font-weight: 600;
}

.no-results {
  text-align: center;
  padding: 25px;
  color: #666;
  font-style: italic;
}
</style>
</head>

<body>

<nav>
  <a href="index.html">Home</a>
  <a href="ores.html">Ores</a>
</nav>

<div class="container">
  <h1>Ores</h1>

  <div class="filter-bar" id="filterBar">
    <div class="filter-group">
      <label>Layer</label>
      <select id="layerSelect">
        <option value="all">All Layers</option>
      </select>
    </div>

    <div class="filter-group">
      <label>Search</label>
      <input id="searchInput" placeholder="Ore name...">
    </div>

    <div class="filter-spacer"></div>

    <button class="reset-btn" id="resetBtn">Reset Filters</button>
    <div id="resultCount"></div>
  </div>

  <table>
    <thead>
      <tr>
        <th data-sort="name">Name</th>
        <th data-sort="rarity">Rarity</th>
        <th>Group</th>
        <th data-sort="value">Value</th>
        <th data-sort="depth">Depth</th>
        <th data-sort="health">Health</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script src="ores-data.js"></script>

<script>
const layers = [
  { id:"stone", name:"Stone Layer", min:0, max:1000, icon:"ðŸª¨" },
  { id:"basalt", name:"Basalt Layer", min:1000, max:2000, icon:"âš«" },
  { id:"limestone", name:"Limestone Layer", min:2000, max:3000, icon:"âšª" },
  { id:"gneiss", name:"Gneiss Layer", min:3000, max:4000, icon:"ðŸ©¶" },
  { id:"tuff", name:"Tuff Layer", min:4000, max:5000, icon:"ðŸŸ¤" },
  { id:"marble", name:"Marble Layer", min:5000, max:6000, icon:"ðŸ¤" },
  { id:"obsidian", name:"Obsidian Layer", min:6000, max:7000, icon:"ðŸŸ£" },
  { id:"peridotite", name:"Peridotite Layer", min:7000, max:8000, icon:"ðŸŸ¢" },
  { id:"magma", name:"Magma & Lava Layer", min:8000, max:9000, icon:"ðŸŸ " },
  { id:"void", name:"Void Layer", min:9000, max:Infinity, icon:"ðŸŸª" }
];


const rarityColors = {
  Common:"#9ca3af33",
  Uncommon:"#4ade8033",
  Rare:"#38bdf833",
  Epic:"#a855f733",
  Legendary:"#facc1533",
  Mythic:"#ec489933",
  Godly:"#ef444433",
  Surreal:"#2dd4bf33",
  Divine:"#fde68a55",
  Immortal:"#f9731633",
  Eternal:"#8b5cf633"
};

const tbody = document.querySelector("tbody");
const layerSelect = document.getElementById("layerSelect");
const searchInput = document.getElementById("searchInput");
const resultCount = document.getElementById("resultCount");
const resetBtn = document.getElementById("resetBtn");

let currentLayer="all", searchQuery="", sortKey=null, sortDir=1;

layers.forEach(l=>{
  const o=document.createElement("option");
  o.value=l.id;
o.textContent = `${l.icon} ${l.name}`;
  layerSelect.appendChild(o);
});

const parseRarity=r=>+r.split("/")[1].replace(/,/g,"");
const inLayer=(o,l)=>o.minDepth<l.max&&o.maxDepth>l.min;

function getList(){
  let list=[...ores];
  if(currentLayer!=="all"){
    const l=layers.find(x=>x.id===currentLayer);
    list=list.filter(o=>inLayer(o,l));
  }
  if(searchQuery){
    list=list.filter(o=>o.name.toLowerCase().includes(searchQuery));
  }
  if(sortKey){
    list.sort((a,b)=>{
      let A,B;
      switch(sortKey){
        case"rarity":A=parseRarity(a.rarity);B=parseRarity(b.rarity);break;
        case"value":A=+a.value.replace(/[^0-9.]/g,"");B=+b.value.replace(/[^0-9.]/g,"");break;
        case"depth":A=a.minDepth;B=b.minDepth;break;
        default:A=a[sortKey];B=b[sortKey];
      }
      return typeof A==="string"?A.localeCompare(B)*sortDir:(A-B)*sortDir;
    });
  }
  return list;
}

function render(){
  const list=getList();
  tbody.innerHTML="";
  if(!list.length){
    tbody.innerHTML=`<tr><td colspan="6" class="no-results">No ores found</td></tr>`;
  }
  list.forEach(o=>{
    const bg = rarityColors[o.group] || "#fff";
    tbody.innerHTML+=`
    <tr>
      <td class="rarity-bg" style="background:${bg}">${o.name}</td>
      <td class="rarity-bg" style="background:${bg}">${o.rarity}</td>
      <td class="rarity-bg" style="background:${bg}">${o.group}</td>
      <td>${o.value}</td>
      <td>${o.maxDepth===Infinity?`${o.minDepth}â€“9000+`:`${o.minDepth}â€“${o.maxDepth}`}</td>
      <td>${o.health} HP</td>
    </tr>`;
  });
  resultCount.textContent=`${list.length} ores`;
}

layerSelect.onchange=()=>{currentLayer=layerSelect.value;render();}
searchInput.oninput=()=>{searchQuery=searchInput.value.toLowerCase();render();}

document.querySelectorAll("th[data-sort]").forEach(th=>{
  th.onclick=()=>{
    sortKey===th.dataset.sort?sortDir*=-1:(sortKey=th.dataset.sort,sortDir=1);
    document.querySelectorAll("th").forEach(h=>h.classList.remove("sorted-asc","sorted-desc"));
    th.classList.add(sortDir===1?"sorted-asc":"sorted-desc");
    render();
  };
});

resetBtn.onclick=()=>{
  currentLayer="all"; searchQuery=""; sortKey=null; sortDir=1;
  layerSelect.value="all"; searchInput.value="";
  document.querySelectorAll("th").forEach(h=>h.classList.remove("sorted-asc","sorted-desc"));
  render();
};

render();

/* sync sticky offset */
const fb=document.getElementById("filterBar");
document.documentElement.style.setProperty("--filter-height", fb.offsetHeight+"px");
</script>

</body>
</html>


